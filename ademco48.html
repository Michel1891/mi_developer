<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manuales de Ademco vista 48</title>

<style>
body{
  background:#034164b9;
  margin:0;
  font-family:Arial,sans-serif;
  color:#fff;
  padding-top:100px;
}

/* HEADER */
header{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  background:rgba(3,65,100,.95);
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 20px;
  z-index:1000;
  box-shadow:0 2px 10px rgba(0,0,0,.4);
}
.header-left{display:flex;align-items:center;gap:15px}
.logo-header{width:50px;height:50px;border-radius:50%}
.user-avatar{width:45px;height:45px;border-radius:50%;border:2px solid #00b4d8}
#btnLogout{background:#00b4d8;color:#fff;border:none;border-radius:6px;padding:8px 14px;cursor:pointer}

/* PANEL */
.container{
  background:rgba(53,47,47,.75);
  max-width:360px;
  margin:20px auto;
  padding:40px;
  border-radius:15px;
  box-shadow:0 0 20px #fff;
  text-align:center;
}
.logo{width:240px;margin-bottom:15px}
button{
  background:#00b4d8;
  color:#fff;
  padding:10px 15px;
  border:none;
  border-radius:6px;
  margin:10px;
  cursor:pointer;
}
.bloqueado{
  display:none;
  background:rgba(0,0,0,.7);
  padding:15px;
  border-radius:10px;
  color:#ff7777;
}

/* CONTENIDO */
.videos-container{
  max-width:450px;
  width:90%;
  margin:30px auto;
  padding:25px;
  background:rgba(53,47,47,.75);
  border-radius:15px;
  box-shadow:0 0 20px #fff;
  display:none;
  opacity:0;
  transition:.5s;
}
.videos-container.show{opacity:1}
.videos-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:20px;
}
.video-card{
  background:rgba(0,0,0,.45);
  padding:15px;
  border-radius:15px;
  text-align:center;
  box-shadow:0 0 10px rgba(0,180,216,.5);
}
video{width:100%;border-radius:10px}

/* VISOR PDF */
#pdfViewerContainer{
  max-width:1100px;
  width:95%;
  height:80vh;
  margin:30px auto;
  background:rgba(0,0,0,.9);
  border-radius:15px;
  box-shadow:0 0 25px #00b4d8;
  display:none;
  flex-direction:column;
}
#pdfHeader{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 15px;
  background:rgba(0,180,216,.25);
  border-radius:15px 15px 0 0;
}
#pdfFrame{
  width:100%;
  height:100%;
  border:none;
  border-radius:0 0 15px 15px;
}
</style>
</head>

<body>

<header>
  <div class="header-left">
    <img src="src/image/logo4.png" class="logo-header">
    <h2>ğŸ“„Manuales Ademco vista 48</h2>
  </div>
  <div>
    <img src="src/image/default-user.png" class="user-avatar">
    <button id="btnLogout">Salir</button>
  </div>
</header>

<div class="container">
  <img src="src/image/logo4.png" class="logo">
  <h2>ğŸ“„Manuales de ademco vista 48 </h2>
  <button id="btnIngresar">ğŸšª Ingrese para visualizar contenido</button>

  <div id="bloqueo" class="bloqueado">
    âš ï¸ Debes tener una suscripciÃ³n activa<br><br>
    <a style="color:#00b4d8"
       href="https://www.mercadopago.com.uy/subscriptions/checkout?preapproval_plan_id=80b9657a5e7040b794c98f5d55ce4a6e">
       Activar suscripciÃ³n
    </a>
  </div>
</div>

<!-- PDFs -->
<div class="videos-container" id="pdfs">
<h2>ğŸ“„ Manuales de Ademco Vista 48</h2>
<div class="videos-grid">
  <div class="video-card">
    <h3>ğŸ“„Manual de Programacion de Ademco vista 48</h3>
    <button onclick="abrirPDF('Manual')">Ver PDF</button>
  </div>
  <div class="video-card">
    <h3>ğŸ“„ GuÃ­a rÃ¡pida de Ademco vista 48</h3>
    <button onclick="abrirPDF('Guia')">Ver PDF</button>
  </div>
  <div class="video-card">
    <h3>ğŸ“„ Preguntas frecuentes Ademco vista 48</h3>
    <button onclick="abrirPDF('Preguntas')">Ver PDF</button>
  </div>
  <div class="video-card">
    <h3>ğŸ“„ Manual de Usuario ademco vista 48</h3>
    <button onclick="abrirPDF('Usuario')">Ver PDF</button>
  </div>
  <div class="video-card">
    <h3>ğŸ“„ Listado de falla de ademco vista 48</h3>
    <button onclick="abrirPDF('Falla')">Ver PDF</button>
  </div>
</div>
</div>

    </div>
    </div>
<!-- VISOR PDF -->
<div id="pdfViewerContainer">
  <div id="pdfHeader">
    <strong>ğŸ“„ Documento</strong>
    <button onclick="cerrarPDF()">Cerrar âœ–</button>
  </div>
  <iframe id="pdfFrame"></iframe>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

/* FIREBASE */
const firebaseConfig={
  apiKey:"AIzaSyB_0_PIpdto8u1touBZNVoHiago6M2akoc",
  authDomain:"manualix-1d0fc.firebaseapp.com",
  projectId:"manualix-1d0fc",
  messagingSenderId:"847110946549",
  appId:"1:847110946549:web:0a507851fef1d9df6ccfbc"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

/* CONTROL DE ACCESO */
let accesoPermitido=false;

const bloques=[
  document.getElementById("pdfs"),
  document.getElementById("bloque1")
];

const bloqueo=document.getElementById("bloqueo");

/* PDFs LOCALES */
const pdfs={
  Manual:"https://firebasestorage.googleapis.com/v0/b/manualix-1d0fc.firebasestorage.app/o/Tutoriales%2FArchivosPdf%2FAdemco%20vista%2048%2FManualdeprogramacionademcovista48%2FVISTA%2048.pdf?alt=media&token=cb920f6d-c181-49c6-8da5-46989dfad725",
  Guia:"https://firebasestorage.googleapis.com/v0/b/manualix-1d0fc.firebasestorage.app/o/Tutoriales%2FArchivosPdf%2FAdemco%20vista%2048%2Fguiarapidaademcovista48%2FGUIA%20RAPIDA%20DE%20PROGRAMACION%20DE%20ADEMCO%2048.pdf?alt=media&token=719541cf-d06f-40c9-b32b-f547f3ef555b",
  Preguntas:"https://firebasestorage.googleapis.com/v0/b/manualix-1d0fc.firebasestorage.app/o/Tutoriales%2FArchivosPdf%2FAdemco%20vista%2048%2FPreguntasFrecuentesVista48%2FPROGRAMAR%20CONTROL%20INALAMBRICO%20ADEMCO%20VISTA%2048.pdf?alt=media&token=7e906e0c-6497-4234-a45c-1ef03056e13f",
  Usuario:"https://firebasestorage.googleapis.com/v0/b/manualix-1d0fc.firebasestorage.app/o/Tutoriales%2FArchivosPdf%2FAdemco%20vista%2048%2FManualdeUsuarioVista48%2FManual%20de%20usuario%20ademco%20vista%2048.pdf?alt=media&token=42874b2a-9afc-4abc-9026-bf8f188a571a",
  Falla:"https://firebasestorage.googleapis.com/v0/b/manualix-1d0fc.firebasestorage.app/o/Tutoriales%2FArchivosPdf%2FAdemco%20vista%2048%2FlistadeFallaVista48%2FLISTA%20DE%20FALLA%20ADEMCO.pdf?alt=media&token=f57e8620-8134-441c-9c95-7b05fee9b9ab"
};

/* ABRIR PDF (SOLO CON SUSCRIPCIÃ“N) */
window.abrirPDF=(id)=>{
  if(!accesoPermitido){
    alert("Debes tener una suscripciÃ³n activa.");
    return;
  }
  const frame=document.getElementById("pdfFrame");
  const visor=document.getElementById("pdfViewerContainer");
  frame.src=pdfs[id];
  visor.style.display="flex";
  visor.scrollIntoView({behavior:"smooth"});
};

window.cerrarPDF=()=>{
  document.getElementById("pdfFrame").src="";
  document.getElementById("pdfViewerContainer").style.display="none";
};

/* BOTÃ“N INGRESAR */
document.getElementById("btnIngresar").onclick=async()=>{
  const user=auth.currentUser;
  if(!user)return;

  const snap=await getDoc(doc(db,"suscripciones",user.email));

  if(snap.exists() && snap.data().activa===true){
    accesoPermitido=true;
    bloqueo.style.display="none";
    bloques.forEach(b=>{
      b.style.display="block";
      setTimeout(()=>b.classList.add("show"),100);
    });
  }else{
    accesoPermitido=false;
    bloqueo.style.display="block";
  }
};

/* AUTO-VALIDACIÃ“N AL RECARGAR */
onAuthStateChanged(auth,async(user)=>{
  if(!user)return;
  const snap=await getDoc(doc(db,"suscripciones",user.email));
  if(snap.exists() && snap.data().activa===true){
    accesoPermitido=true;
  }
});

/* LOGOUT */
document.getElementById("btnLogout").onclick=async()=>{
  await signOut(auth);
  location.reload();
};
</script>

</body>
</html>

